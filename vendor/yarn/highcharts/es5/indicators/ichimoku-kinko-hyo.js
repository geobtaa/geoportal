/*
 Highstock JS v11.1.0 (2023-06-05)

 Indicator series type for Highcharts Stock

 (c) 2010-2021 Sebastian Bochan

 License: www.highcharts.com/license
*/
'use strict';(function(f){"object"===typeof module&&module.exports?(f["default"]=f,module.exports=f):"function"===typeof define&&define.amd?define("highcharts/indicators/ichimoku-kinko-hyo",["highcharts","highcharts/modules/stock"],function(t){f(t);f.Highcharts=t;return f}):f("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(f){function t(f,m,w,k){f.hasOwnProperty(m)||(f[m]=k.apply(null,w),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:m,
module:f[m]}})))}f=f?f._modules:{};t(f,"Stock/Indicators/IKH/IKHIndicator.js",[f["Extensions/DataGrouping/ApproximationRegistry.js"],f["Core/Color/Color.js"],f["Core/Series/SeriesRegistry.js"],f["Core/Utilities.js"]],function(f,m,w,k){function t(e){return e.reduce(function(b,a){return Math.max(b,a[1])},-Infinity)}function G(e){return e.reduce(function(b,a){return Math.min(b,a[2])},Infinity)}function z(e){return{high:t(e),low:G(e)}}function H(e,b,a,u){if(e&&b&&a&&u){var d=b.plotX-e.plotX;b=b.plotY-
e.plotY;var x=u.plotX-a.plotX;u=u.plotY-a.plotY;var f=e.plotX-a.plotX,p=e.plotY-a.plotY;a=(-b*f+d*p)/(-x*b+d*u);x=(x*p-u*f)/(-x*b+d*u);if(0<=a&&1>=a&&0<=x&&1>=x)return{plotX:e.plotX+x*d,plotY:e.plotY+x*b}}}function E(e){var b=e.indicator;b.points=e.points;b.nextPoints=e.nextPoints;b.color=e.color;b.options=B(e.options.senkouSpan.styles,e.gap);b.graph=e.graph;b.fillGraph=!0;w.seriesTypes.sma.prototype.drawGraph.call(b)}var I=this&&this.__extends||function(){var e=function(b,a){e=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])};return e(b,a)};return function(b,a){function u(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(b,a);b.prototype=null===a?Object.create(a):(u.prototype=a.prototype,new u)}}(),C=m.parse,F=w.seriesTypes.sma,J=k.defined;m=k.extend;var K=k.isArray,L=k.isNumber,M=
k.getClosestDistance,B=k.merge,N=k.objectEach;k=function(e){function b(){var a=null!==e&&e.apply(this,arguments)||this;a.data=[];a.options={};a.points=[];a.graphCollection=[];return a}I(b,e);b.prototype.init=function(){e.prototype.init.apply(this,arguments);this.options=B({tenkanLine:{styles:{lineColor:this.color}},kijunLine:{styles:{lineColor:this.color}},chikouLine:{styles:{lineColor:this.color}},senkouSpanA:{styles:{lineColor:this.color,fill:C(this.color).setOpacity(.5).get()}},senkouSpanB:{styles:{lineColor:this.color,
fill:C(this.color).setOpacity(.5).get()}},senkouSpan:{styles:{fill:C(this.color).setOpacity(.2).get()}}},this.options)};b.prototype.toYData=function(a){return[a.tenkanSen,a.kijunSen,a.chikouSpan,a.senkouSpanA,a.senkouSpanB]};b.prototype.translate=function(){w.seriesTypes.sma.prototype.translate.apply(this);for(var a=0,b=this.points;a<b.length;a++)for(var d=b[a],e=0,f=this.pointArrayMap;e<f.length;e++){var p=f[e],q=d[p];L(q)&&(d["plot"+p]=this.yAxis.toPixels(q,!0),d.plotY=d["plot"+p],d.tooltipPos=
[d.plotX,d["plot"+p]],d.isNull=!1)}};b.prototype.drawGraph=function(){var a=this,b=a.points,d=a.options,e=a.graph,f=a.color,p={options:{gapSize:d.gapSize}},q=a.pointArrayMap.length,g=[[],[],[],[],[],[]],n={tenkanLine:g[0],kijunLine:g[1],chikouLine:g[2],senkouSpanA:g[3],senkouSpanB:g[4],senkouSpan:g[5]},c=[],r=a.options.senkouSpan,k=r.color||r.styles.fill,D=r.negativeColor,m=[[],[]],v=[[],[]];r=b.length;var t=0,y,z,A;for(a.ikhMap=n;r--;){var h=b[r];for(y=0;y<q;y++){var l=a.pointArrayMap[y];J(h[l])&&
g[y].push({plotX:h.plotX,plotY:h["plot"+l],isNull:!1})}D&&r!==b.length-1&&(l=n.senkouSpanB.length-1,h=H(n.senkouSpanA[l-1],n.senkouSpanA[l],n.senkouSpanB[l-1],n.senkouSpanB[l]))&&(h={plotX:h.plotX,plotY:h.plotY,isNull:!1,intersectPoint:!0},n.senkouSpanA.splice(l,0,h),n.senkouSpanB.splice(l,0,h),c.push(l))}N(n,function(b,c){d[c]&&"senkouSpan"!==c&&(a.points=g[t],a.options=B(d[c].styles,p),a.graph=a["graph"+c],a.fillGraph=!1,a.color=f,w.seriesTypes.sma.prototype.drawGraph.call(a),a["graph"+c]=a.graph);
t++});if(a.graphCollection)for(q=0,r=a.graphCollection;q<r.length;q++)l=r[q],a[l].destroy(),delete a[l];a.graphCollection=[];if(D&&n.senkouSpanA[0]&&n.senkouSpanB[0]){c.unshift(0);c.push(n.senkouSpanA.length-1);for(r=0;r<c.length-1;r++){l=c[r];h=c[r+1];q=n.senkouSpanB.slice(l,h+1);l=n.senkouSpanA.slice(l,h+1);if(1<=Math.floor(q.length/2))if(h=Math.floor(q.length/2),q[h].plotY===l[h].plotY){for(A=y=h=0;A<q.length;A++)h+=q[A].plotY,y+=l[A].plotY;h=h>y?0:1}else h=q[h].plotY>l[h].plotY?0:1;else h=q[0].plotY>
l[0].plotY?0:1;m[h]=m[h].concat(q);v[h]=v[h].concat(l)}["graphsenkouSpanColor","graphsenkouSpanNegativeColor"].forEach(function(b,c){m[c].length&&v[c].length&&(z=0===c?k:D,E({indicator:a,points:m[c],nextPoints:v[c],color:z,options:d,gap:p,graph:a[b]}),a[b]=a.graph,a.graphCollection.push(b))})}else E({indicator:a,points:n.senkouSpanB,nextPoints:n.senkouSpanA,color:k,options:d,gap:p,graph:a.graphsenkouSpan}),a.graphsenkouSpan=a.graph;delete a.nextPoints;delete a.fillGraph;a.points=b;a.options=d;a.graph=
e;a.color=f};b.prototype.getGraphPath=function(a){var b=[],d;a=a||this.points;if(this.fillGraph&&this.nextPoints){if((d=w.seriesTypes.sma.prototype.getGraphPath.call(this,this.nextPoints))&&d.length){d[0][0]="L";b=w.seriesTypes.sma.prototype.getGraphPath.call(this,a);d=d.slice(0,b.length);for(var e=d.length-1;0<=e;e--)b.push(d[e])}}else b=w.seriesTypes.sma.prototype.getGraphPath.apply(this,arguments);return b};b.prototype.getValues=function(a,b){var d=b.period,e=b.periodTenkan;b=b.periodSenkouSpanB;
var f=a.xData,p=a.yData,q=p&&p.length||0;a=M(a.xAxis.series.map(function(a){return a.xData||[]}));var g=[],n=[],c;if(!(f.length<=d)&&K(p[0])&&4===p[0].length){var r=f[0]-d*a;for(c=0;c<d;c++)n.push(r+c*a);for(c=0;c<q;c++){if(c>=e){var k=p.slice(c-e,c);k=z(k);k=(k.high+k.low)/2}if(c>=d){var m=p.slice(c-d,c);m=z(m);m=(m.high+m.low)/2;var u=(k+m)/2}if(c>=b){var v=p.slice(c-b,c);v=z(v);v=(v.high+v.low)/2}r=p[c][3];var t=f[c];"undefined"===typeof g[c]&&(g[c]=[]);"undefined"===typeof g[c+d-1]&&(g[c+d-1]=
[]);g[c+d-1][0]=k;g[c+d-1][1]=m;g[c+d-1][2]=void 0;"undefined"===typeof g[c+1]&&(g[c+1]=[]);g[c+1][2]=r;c<=d&&(g[c+d-1][3]=void 0,g[c+d-1][4]=void 0);"undefined"===typeof g[c+2*d-2]&&(g[c+2*d-2]=[]);g[c+2*d-2][3]=u;g[c+2*d-2][4]=v;n.push(t)}for(c=1;c<=d;c++)n.push(t+c*a);return{values:g,xData:n,yData:g}}};b.defaultOptions=B(F.defaultOptions,{params:{index:void 0,period:26,periodTenkan:9,periodSenkouSpanB:52},marker:{enabled:!1},tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>TENKAN SEN: {point.tenkanSen:.3f}<br/>KIJUN SEN: {point.kijunSen:.3f}<br/>CHIKOU SPAN: {point.chikouSpan:.3f}<br/>SENKOU SPAN A: {point.senkouSpanA:.3f}<br/>SENKOU SPAN B: {point.senkouSpanB:.3f}<br/>'},
tenkanLine:{styles:{lineWidth:1,lineColor:void 0}},kijunLine:{styles:{lineWidth:1,lineColor:void 0}},chikouLine:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanA:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanB:{styles:{lineWidth:1,lineColor:void 0}},senkouSpan:{styles:{fill:"rgba(255, 0, 0, 0.5)"}},dataGrouping:{approximation:"ichimoku-averages"}});return b}(F);m(k.prototype,{pointArrayMap:["tenkanSen","kijunSen","chikouSpan","senkouSpanA","senkouSpanB"],pointValKey:"tenkanSen",nameComponents:["periodSenkouSpanB",
"period","periodTenkan"]});f["ichimoku-averages"]=function(){var e=[],b;[].forEach.call(arguments,function(a,k){e.push(f.average(a));b=!b&&"undefined"===typeof e[k]});return b?void 0:e};w.registerSeriesType("ikh",k);"";return k});t(f,"masters/indicators/ichimoku-kinko-hyo.src.js",[],function(){})});
//# sourceMappingURL=ichimoku-kinko-hyo.js.map