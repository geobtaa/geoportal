/*
 Highcharts Gantt JS v11.1.0 (2023-06-05)

 Tree Grid

 (c) 2016-2021 Jon Arild Nygard

 License: www.highcharts.com/license
*/
'use strict';(function(e){"object"===typeof module&&module.exports?(e["default"]=e,module.exports=e):"function"===typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(G){e(G);e.Highcharts=G;return e}):e("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(e){function G(e,v,t,O){e.hasOwnProperty(v)||(e[v]=O.apply(null,t),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:v,module:e[v]}})))}e=e?e._modules:
{};G(e,"Core/Axis/BrokenAxis.js",[e["Core/Axis/Stacking/StackItem.js"],e["Core/Utilities.js"]],function(e,v){var t=v.addEvent,D=v.find,F=v.fireEvent,w=v.isArray,l=v.isNumber,B=v.pick,y;(function(a){function z(){"undefined"!==typeof this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function E(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)}function J(){var a=this.brokenAxis;if(a&&a.hasBreaks){for(var b=this.tickPositions,A=this.tickPositions.info,h=[],d=0;d<
b.length;d++)a.isInAnyBreak(b[d])||h.push(b[d]);this.tickPositions=h;this.tickPositions.info=A}}function g(){this.brokenAxis||(this.brokenAxis=new y(this))}function q(){var a=this.options.connectNulls,b=this.points,A=this.xAxis,h=this.yAxis;if(this.isDirty)for(var d=b.length;d--;){var f=b[d],m=!(null===f.y&&!1===a)&&(A&&A.brokenAxis&&A.brokenAxis.isInAnyBreak(f.x,!0)||h&&h.brokenAxis&&h.brokenAxis.isInAnyBreak(f.y,!0));f.visible=m?!1:!1!==f.options.visible}}function n(){this.drawBreaks(this.xAxis,
["x"]);this.drawBreaks(this.yAxis,B(this.pointArrayMap,["y"]))}function c(a,b){var A=this,h=A.points,d,f,m,x;if(a&&a.brokenAxis&&a.brokenAxis.hasBreaks){var c=a.brokenAxis;b.forEach(function(b){d=c&&c.breakArray||[];f=a.isXAxis?a.min:B(A.options.threshold,a.min);h.forEach(function(h){x=B(h["stack"+b.toUpperCase()],h[b]);d.forEach(function(b){if(l(f)&&l(x)){m=!1;if(f<b.from&&x>b.to||f>b.from&&x<b.from)m="pointBreak";else if(f<b.from&&x>b.from&&x<b.to||f>b.from&&x>b.to&&x<b.from)m="pointInBreak";m&&
F(a,m,{point:h,brk:b})}})})})}}function p(){var a=this.currentDataGrouping,b=a&&a.gapSize;a=this.points.slice();var c=this.yAxis,h=this.options.gapSize,d=a.length-1,f;if(h&&0<d)for("value"!==this.options.gapUnit&&(h*=this.basePointRange),b&&b>h&&b>=this.basePointRange&&(h=b),f=void 0;d--;)f&&!1!==f.visible||(f=a[d+1]),b=a[d],!1!==f.visible&&!1!==b.visible&&(f.x-b.x>h&&(f=(b.x+f.x)/2,a.splice(d+1,0,{isNull:!0,x:f}),c.stacking&&this.options.stacking&&(f=c.stacking.stacks[this.stackKey][f]=new e(c,c.options.stackLabels,
!1,f,this.stack),f.total=0)),f=b);return this.getGraphPath(a)}var u=[];a.compose=function(a,b){v.pushUnique(u,a)&&(a.keepProps.push("brokenAxis"),t(a,"init",g),t(a,"afterInit",z),t(a,"afterSetTickPositions",J),t(a,"afterSetOptions",E));if(v.pushUnique(u,b)){var A=b.prototype;A.drawBreaks=c;A.gappedPath=p;t(b,"afterGeneratePoints",q);t(b,"afterRender",n)}return a};var y=function(){function a(a){this.hasBreaks=!1;this.axis=a}a.isInBreak=function(a,c){var b=a.repeat||Infinity,d=a.from,f=a.to-a.from;
c=c>=d?(c-d)%b:b-(d-c)%b;return a.inclusive?c<=f:c<f&&0!==c};a.lin2Val=function(b){var c=this.brokenAxis;c=c&&c.breakArray;if(!c||!l(b))return b;var h;for(h=0;h<c.length;h++){var d=c[h];if(d.from>=b)break;else d.to<b?b+=d.len:a.isInBreak(d,b)&&(b+=d.len)}return b};a.val2Lin=function(b){var c=this.brokenAxis;c=c&&c.breakArray;if(!c||!l(b))return b;var h=b,d;for(d=0;d<c.length;d++){var f=c[d];if(f.to<=b)h-=f.len;else if(f.from>=b)break;else if(a.isInBreak(f,b)){h-=b-f.from;break}}return h};a.prototype.findBreakAt=
function(a,c){return D(c,function(b){return b.from<a&&a<b.to})};a.prototype.isInAnyBreak=function(b,c){var h=this.axis,d=h.options.breaks||[],f=d.length,m;if(f&&l(b)){for(;f--;)if(a.isInBreak(d[f],b)){var x=!0;m||(m=B(d[f].showPoints,!h.isXAxis))}var g=x&&c?x&&!m:x}return g};a.prototype.setBreaks=function(b,c){var h=this,d=h.axis,f=w(b)&&!!b.length;d.isDirty=h.hasBreaks!==f;h.hasBreaks=f;b!==d.options.breaks&&(d.options.breaks=d.userOptions.breaks=b);d.forceRedraw=!0;d.series.forEach(function(a){a.isDirty=
!0});f||d.val2lin!==a.val2Lin||(delete d.val2lin,delete d.lin2val);f&&(d.userOptions.ordinal=!1,d.lin2val=a.lin2Val,d.val2lin=a.val2Lin,d.setExtremes=function(a,b,c,f,g){if(h.hasBreaks){for(var m=this.options.breaks||[],x;x=h.findBreakAt(a,m);)a=x.to;for(;x=h.findBreakAt(b,m);)b=x.from;b<a&&(b=a)}d.constructor.prototype.setExtremes.call(this,a,b,c,f,g)},d.setAxisTranslation=function(){d.constructor.prototype.setAxisTranslation.call(this);h.unitLength=void 0;if(h.hasBreaks){var b=d.options.breaks||
[],c=[],f=[],g=B(d.pointRangePadding,0),p=0,n,q=d.userMin||d.min,u=d.userMax||d.max,k;b.forEach(function(k){n=k.repeat||Infinity;l(q)&&l(u)&&(a.isInBreak(k,q)&&(q+=k.to%n-q%n),a.isInBreak(k,u)&&(u-=u%n-k.from%n))});b.forEach(function(a){C=a.from;n=a.repeat||Infinity;if(l(q)&&l(u)){for(;C-n>q;)C-=n;for(;C<q;)C+=n;for(k=C;k<u;k+=n)c.push({value:k,move:"in"}),c.push({value:k+a.to-a.from,move:"out",size:a.breakSize})}});c.sort(function(k,a){return k.value===a.value?("in"===k.move?0:1)-("in"===a.move?
0:1):k.value-a.value});var r=0;var C=q;c.forEach(function(k){r+="in"===k.move?1:-1;1===r&&"in"===k.move&&(C=k.value);0===r&&l(C)&&(f.push({from:C,to:k.value,len:k.value-C-(k.size||0)}),p+=k.value-C-(k.size||0))});h.breakArray=f;l(q)&&l(u)&&l(d.min)&&(h.unitLength=u-q-p+g,F(d,"afterBreaks"),d.staticScale?d.transA=d.staticScale:h.unitLength&&(d.transA*=(u-d.min+g)/h.unitLength),g&&(d.minPixelPadding=d.transA*(d.minPointOffset||0)),d.min=q,d.max=u)}});B(c,!0)&&d.chart.redraw()};return a}();a.Additions=
y})(y||(y={}));return y});G(e,"Core/Axis/GridAxis.js",[e["Core/Axis/Axis.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(e,v,t){function D(k,a){var r={width:0,height:0};a.forEach(function(a){a=k[a];if(t.isObject(a,!0)){var b=t.isObject(a.label,!0)?a.label:{};a=b.getBBox?b.getBBox().height:0;b.textStr&&!m(b.textPxLength)&&(b.textPxLength=b.getBBox().width);var c=m(b.textPxLength)?Math.round(b.textPxLength):0;b.textStr&&(c=Math.round(b.getBBox().width));r.height=Math.max(a,r.height);r.width=
Math.max(c,r.width)}});"treegrid"===this.options.type&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode&&(r.width+=this.options.labels.indentation*((this.treeGrid.mapOfPosToGridNode[-1].height||0)-1));return r}function F(){var k=this.grid;(k&&k.columns||[]).forEach(function(k){k.getOffset()})}function w(k){if(!0===(this.options.grid||{}).enabled){var a=this.axisTitle,b=this.height,c=this.horiz,m=this.left,f=this.offset,d=this.opposite,g=this.options,x=this.top,h=this.width,n=this.tickSize(),p=a&&a.getBBox().width,
q=g.title.x,H=g.title.y;g=M(g.title.margin,c?5:10);a=a?this.chart.renderer.fontMetrics(a).f:0;n=(c?x+b:m)+(c?1:-1)*(d?-1:1)*(n?n[0]/2:0)+(this.side===I.bottom?a:0);k.titlePosition.x=c?m-(p||0)/2-g+q:n+(d?h:0)+f+q;k.titlePosition.y=c?n-(d?b:0)+(d?a:-a)/2+f+H:x-g+H}}function l(){var a=this.chart,r=this.options.grid;r=void 0===r?{}:r;var b=this.userOptions;if(r.enabled){var c=this.options;c.labels.align=M(c.labels.align,"center");this.categories||(c.showLastLabel=!1);this.labelRotation=0;c.labels.rotation=
0}if(r.columns){c=this.grid.columns=[];for(var m=this.grid.columnIndex=0;++m<r.columns.length;){var d=x(b,r.columns[r.columns.length-m-1],{isInternal:!0,linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete d.grid.columns;d=new e(this.chart,d,"yAxis");d.grid.isColumn=!0;d.grid.columnIndex=m;h(a.axes,d);h(a[this.coll]||[],d);c.push(d)}}}function B(){var a=this.grid,r=this.options;if(!0===(r.grid||{}).enabled){var b=this.min||0,c=this.max||0;this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,
this.tickPositions);this.rightWall&&this.rightWall.destroy();if(this.grid&&this.grid.isOuterAxis()&&this.axisLine){var m=r.lineWidth;if(m){m=this.getLinePath(m);var d=m[0],f=m[1],g=((this.tickSize("tick")||[1])[0]-1)*(this.side===I.top||this.side===I.left?-1:1);"M"===d[0]&&"L"===f[0]&&(this.horiz?(d[2]+=g,f[2]+=g):(d[1]+=g,f[1]+=g));!this.horiz&&this.chart.marginRight&&(d=[d,["L",this.left,d[2]||0]],g=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(c+this.tickmarkOffset)],f=[["M",
f[1]||0,this.toPixels(c+this.tickmarkOffset)],g],this.grid.upperBorder||0===b%1||(this.grid.upperBorder=this.grid.renderBorder(d)),this.grid.upperBorder&&(this.grid.upperBorder.attr({stroke:r.lineColor,"stroke-width":r.lineWidth}),this.grid.upperBorder.animate({d})),this.grid.lowerBorder||0===c%1||(this.grid.lowerBorder=this.grid.renderBorder(f)),this.grid.lowerBorder&&(this.grid.lowerBorder.attr({stroke:r.lineColor,"stroke-width":r.lineWidth}),this.grid.lowerBorder.animate({d:f})));this.grid.axisLineExtra?
(this.grid.axisLineExtra.attr({stroke:r.lineColor,"stroke-width":r.lineWidth}),this.grid.axisLineExtra.animate({d:m})):this.grid.axisLineExtra=this.grid.renderBorder(m);this.axisLine[this.showAxis?"show":"hide"]()}}(a&&a.columns||[]).forEach(function(a){return a.render()});if(!this.horiz&&this.chart.hasRendered&&(this.scrollbar||this.linkedParent&&this.linkedParent.scrollbar)){a=this.tickmarkOffset;r=this.tickPositions[this.tickPositions.length-1];m=this.tickPositions[0];for(d=f=void 0;(f=this.hiddenLabels.pop())&&
f.element;)f.show();for(;(d=this.hiddenMarks.pop())&&d.element;)d.show();(f=this.ticks[m].label)&&(b-m>a?this.hiddenLabels.push(f.hide()):f.show());(f=this.ticks[r].label)&&(r-c>a?this.hiddenLabels.push(f.hide()):f.show());(b=this.ticks[r].mark)&&r-c<a&&0<r-c&&this.ticks[r].isLast&&this.hiddenMarks.push(b.hide())}}}function y(){var a=this.tickPositions&&this.tickPositions.info,r=this.options,b=this.userOptions.labels||{};(r.grid||{}).enabled&&(this.horiz?(this.series.forEach(function(a){a.options.pointRange=
0}),a&&r.dateTimeLabelFormats&&r.labels&&!A(b.align)&&(!1===r.dateTimeLabelFormats[a.unitName].range||1<a.count)&&(r.labels.align="left",A(b.x)||(r.labels.x=3))):"treegrid"!==this.options.type&&this.grid&&this.grid.columns&&(this.minPointOffset=this.tickInterval))}function a(a){var k=this.options;a=a.userOptions;var b=k&&t.isObject(k.grid,!0)?k.grid:{};if(!0===b.enabled){var c=x(!0,{className:"highcharts-grid-axis "+(a.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B",
"%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"0.9em"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},a);"xAxis"===this.coll&&(A(a.linkedTo)&&!A(a.tickPixelInterval)&&(c.tickPixelInterval=350),A(a.tickPixelInterval)||!A(a.linkedTo)||A(a.tickPositioner)||A(a.tickInterval)||
(c.tickPositioner=function(a,k){var b=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(b){for(var r=c.units||[],d=void 0,f=1,C="year",g=0;g<r.length;g++){var x=r[g];if(x&&x[0]===b.unitName){d=g;break}}(r=m(d)&&r[d+1])?(C=r[0]||"year",f=(f=r[1])&&f[0]||1):"year"===b.unitName&&(f=10*b.count);b=H[C];this.tickInterval=b*f;return this.chart.time.getTimeTicks({unitRange:b,count:f,unitName:C},a,k,this.options.startOfWeek)}}));x(!0,this.options,c);this.horiz&&(k.minPadding=
M(a.minPadding,0),k.maxPadding=M(a.maxPadding,0));m(k.grid.borderWidth)&&(k.tickWidth=k.lineWidth=b.borderWidth)}}function z(a){a=(a=a.userOptions)&&a.grid||{};var k=a.columns;a.enabled&&k&&x(!0,this.options,k[k.length-1])}function E(){(this.grid.columns||[]).forEach(function(a){return a.setScale()})}function J(a){var k=this.horiz,b=this.maxLabelDimensions,c=this.options.grid;c=void 0===c?{}:c;if(c.enabled&&b){var m=2*this.options.labels.distance;k=k?c.cellHeight||m+b.height:m+b.width;f(a.tickSize)?
a.tickSize[0]=k:a.tickSize=[k,0]}}function g(){this.axes.forEach(function(a){(a.grid&&a.grid.columns||[]).forEach(function(a){a.setAxisSize();a.setAxisTranslation()})})}function q(a){var b=this.grid;(b.columns||[]).forEach(function(b){return b.destroy(a.keepEvents)});b.columns=void 0}function n(a){a=a.userOptions||{};var b=a.grid||{};b.enabled&&A(b.borderColor)&&(a.tickColor=a.lineColor=b.borderColor);this.grid||(this.grid=new Q(this));this.hiddenLabels=[];this.hiddenMarks=[]}function c(a){var b=
this.label,c=this.axis,k=c.reversed,d=c.chart,f=c.options.grid||{},g=c.options.labels,x=g.align,h=I[c.side],n=a.tickmarkOffset,q=c.tickPositions,p=this.pos-n;q=m(q[a.index+1])?q[a.index+1]-n:(c.max||0)+n;var H=c.tickSize("tick");n=H?H[0]:0;H=H?H[1]/2:0;if(!0===f.enabled){if("top"===h){f=c.top+c.offset;var u=f-n}else"bottom"===h?(u=d.chartHeight-c.bottom+c.offset,f=u+n):(f=c.top+c.len-(c.translate(k?q:p)||0),u=c.top+c.len-(c.translate(k?p:q)||0));"right"===h?(h=d.chartWidth-c.right+c.offset,k=h+n):
"left"===h?(k=c.left+c.offset,h=k-n):(h=Math.round(c.left+(c.translate(k?q:p)||0))-H,k=Math.min(Math.round(c.left+(c.translate(k?p:q)||0))-H,c.left+c.len));this.slotWidth=k-h;a.pos.x="left"===x?h:"right"===x?k:h+(k-h)/2;a.pos.y=u+(f-u)/2;b&&(d=d.renderer.fontMetrics(b),b=b.getBBox().height,a.pos.y=g.useHTML?a.pos.y+(d.b+-(b/2)):a.pos.y+((d.b-(d.h-d.f))/2+-((Math.round(b/d.h)-1)*d.h/2)));a.pos.x+=c.horiz&&g.x||0}}function p(a){var c=a.axis,b=a.value;if(c.options.grid&&c.options.grid.enabled){var k=
c.tickPositions,f=(c.linkedParent||c).series[0],m=b===k[0];k=b===k[k.length-1];var g=f&&d(f.options.data,function(a){return a[c.isXAxis?"x":"y"]===b}),h=void 0;g&&f.is("gantt")&&(h=x(g),v.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(h));a.isFirst=m;a.isLast=k;a.point=h}}function u(){var a=this.options,c=this.categories,b=this.tickPositions,d=b[0],f=b[b.length-1],m=this.linkedParent&&this.linkedParent.min||this.min,g=this.linkedParent&&this.linkedParent.max||this.max,h=this.tickInterval;
!0!==(a.grid||{}).enabled||c||!this.horiz&&!this.isLinked||(d<m&&d+h>m&&!a.startOnTick&&(b[0]=m),f>g&&f-h<g&&!a.endOnTick&&(b[b.length-1]=g))}function L(a){var c=this.options.grid;return!0===(void 0===c?{}:c).enabled&&this.categories?this.tickInterval:a.apply(this,Array.prototype.slice.call(arguments,1))}var K=v.dateFormats,b=t.addEvent,A=t.defined,h=t.erase,d=t.find,f=t.isArray,m=t.isNumber,x=t.merge,M=t.pick,H=t.timeUnits,P=t.wrap,I;(function(a){a[a.top=0]="top";a[a.right=1]="right";a[a.bottom=
2]="bottom";a[a.left=3]="left"})(I||(I={}));var N=[],Q=function(){function a(a){this.axis=a}a.prototype.isOuterAxis=function(){var a=this.axis,c=a.grid.columnIndex,b=a.linkedParent&&a.linkedParent.grid.columns||a.grid.columns,k=c?a.linkedParent:a,d=-1,f=0;(a.chart[a.coll]||[]).forEach(function(c,b){c.side!==a.side||c.options.isInternal||(f=b,c===k&&(d=b))});return f===d&&(m(c)?b.length===c:!0)};a.prototype.renderBorder=function(a){var c=this.axis,b=c.chart.renderer,k=c.options;a=b.path(a).addClass("highcharts-axis-line").add(c.axisBorder);
b.styledMode||a.attr({stroke:k.lineColor,"stroke-width":k.lineWidth,zIndex:7});return a};return a}();K.E=function(a){return this.dateFormat("%a",a,!0).charAt(0)};K.W=function(a){var c=this,b=new this.Date(a);["Hours","Milliseconds","Minutes","Seconds"].forEach(function(a){c.set(a,b,0)});var d=(this.get("Day",b)+6)%7;a=new this.Date(b.valueOf());this.set("Date",a,this.get("Date",b)-d+3);d=new this.Date(this.get("FullYear",a),0,1);4!==this.get("Day",d)&&(this.set("Month",b,0),this.set("Date",b,1+(11-
this.get("Day",d))%7));return(1+Math.floor((a.valueOf()-d.valueOf())/6048E5)).toString()};"";return{compose:function(d,f,m){t.pushUnique(N,d)&&(d.keepProps.push("grid"),d.prototype.getMaxLabelDimensions=D,P(d.prototype,"unsquish",L),b(d,"init",n),b(d,"afterGetOffset",F),b(d,"afterGetTitlePosition",w),b(d,"afterInit",l),b(d,"afterRender",B),b(d,"afterSetAxisTranslation",y),b(d,"afterSetOptions",a),b(d,"afterSetOptions",z),b(d,"afterSetScale",E),b(d,"afterTickSize",J),b(d,"trimTicks",u),b(d,"destroy",
q));t.pushUnique(N,f)&&b(f,"afterSetChartSize",g);t.pushUnique(N,m)&&(b(m,"afterGetLabelPosition",c),b(m,"labelFormat",p));return d}}});G(e,"Gantt/Tree.js",[e["Core/Utilities.js"]],function(e){var v=e.extend,t=e.isNumber,D=e.pick,F=function(e,t){var l=e.reduce(function(a,e){var l=D(e.parent,"");"undefined"===typeof a[l]&&(a[l]=[]);a[l].push(e);return a},{});Object.keys(l).forEach(function(a,e){var z=l[a];""!==a&&-1===t.indexOf(a)&&(z.forEach(function(a){e[""].push(a)}),delete e[a])});return l},w=
function(e,B,y,a,z,E){var l=0,g=0,q=E&&E.after,n=E&&E.before;B={data:a,depth:y-1,id:e,level:y,parent:B};var c,p;"function"===typeof n&&n(B,E);n=(z[e]||[]).map(function(a){var n=w(a.id,e,y+1,a,z,E),q=a.start;a=!0===a.milestone?q:a.end;c=!t(c)||q<c?q:c;p=!t(p)||a>p?a:p;l=l+1+n.descendants;g=Math.max(n.height+1,g);return n});a&&(a.start=D(a.start,c),a.end=D(a.end,p));v(B,{children:n,descendants:l,height:g});"function"===typeof q&&q(B,E);return B};return{getListOfParents:F,getNode:w,getTree:function(e,
t){var l=e.map(function(a){return a.id});e=F(e,l);return w("",null,1,null,e,t)}}});G(e,"Core/Axis/TreeGrid/TreeGridTick.js",[e["Core/Utilities.js"]],function(e){function v(){this.treeGrid||(this.treeGrid=new E(this))}function t(a,g){a=a.treeGrid;var q=!a.labelIcon,n=g.renderer,c=g.xy,e=g.options,u=e.width||0,l=e.height||0,t=c.x-u/2-(e.padding||0);c=c.y-l/2;var b=g.collapsed?90:180,z=g.show&&B(c),h=a.labelIcon;h||(a.labelIcon=h=n.path(n.symbols[e.type](e.x||0,e.y||0,u,l)).addClass("highcharts-label-icon").add(g.group));
h[z?"show":"hide"]();n.styledMode||h.attr({cursor:"pointer",fill:y(g.color,"#666666"),"stroke-width":1,stroke:e.lineColor,strokeWidth:e.lineWidth||0});h[q?"attr":"animate"]({translateX:t,translateY:c,rotation:b})}function D(a,g,e,n,c,p,u,t,z){var b=y(this.options&&this.options.labels,p);p=this.pos;var q=this.axis,h="treegrid"===q.options.type;a=a.apply(this,[g,e,n,c,b,u,t,z]);h&&(g=b&&l(b.symbol,!0)?b.symbol:{},b=b&&B(b.indentation)?b.indentation:0,p=(p=(q=q.treeGrid.mapOfPosToGridNode)&&q[p])&&p.depth||
1,a.x+=(g.width||0)+2*(g.padding||0)+(p-1)*b);return a}function F(a){var g=this,e=g.pos,n=g.axis,c=g.label,p=n.treeGrid.mapOfPosToGridNode,u=n.options,z=y(g.options&&g.options.labels,u&&u.labels),v=z&&l(z.symbol,!0)?z.symbol:{},b=(p=p&&p[e])&&p.depth;u="treegrid"===u.type;var A=-1<n.tickPositions.indexOf(e);e=n.chart.styledMode;u&&p&&c&&c.element&&c.addClass("highcharts-treegrid-node-level-"+b);a.apply(g,Array.prototype.slice.call(arguments,1));u&&c&&c.element&&p&&p.descendants&&0<p.descendants&&
(n=n.treeGrid.isCollapsed(p),t(g,{color:!e&&c.styles&&c.styles.color||"",collapsed:n,group:c.parentGroup,options:v,renderer:c.renderer,show:A,xy:c.xy}),v="highcharts-treegrid-node-"+(n?"expanded":"collapsed"),c.addClass("highcharts-treegrid-node-"+(n?"collapsed":"expanded")).removeClass(v),e||c.css({cursor:"pointer"}),[c,g.treeGrid.labelIcon].forEach(function(a){a&&!a.attachedTreeGridEvents&&(w(a.element,"mouseover",function(){c.addClass("highcharts-treegrid-node-active");c.renderer.styledMode||c.css({textDecoration:"underline"})}),
w(a.element,"mouseout",function(){var a=l(z.style)?z.style:{};c.removeClass("highcharts-treegrid-node-active");c.renderer.styledMode||c.css({textDecoration:a.textDecoration})}),w(a.element,"click",function(){g.treeGrid.toggleCollapse()}),a.attachedTreeGridEvents=!0)}))}var w=e.addEvent,l=e.isObject,B=e.isNumber,y=e.pick,a=e.wrap,z=[],E=function(){function l(a){this.tick=a}l.compose=function(g){e.pushUnique(z,g)&&(w(g,"init",v),a(g.prototype,"getLabelPosition",D),a(g.prototype,"renderLabel",F),g.prototype.collapse=
function(a){this.treeGrid.collapse(a)},g.prototype.expand=function(a){this.treeGrid.expand(a)},g.prototype.toggleCollapse=function(a){this.treeGrid.toggleCollapse(a)})};l.prototype.collapse=function(a){var g=this.tick,e=g.axis,c=e.brokenAxis;c&&e.treeGrid.mapOfPosToGridNode&&(g=e.treeGrid.collapse(e.treeGrid.mapOfPosToGridNode[g.pos]),c.setBreaks(g,y(a,!0)))};l.prototype.destroy=function(){this.labelIcon&&this.labelIcon.destroy()};l.prototype.expand=function(a){var g=this.tick,e=g.axis,c=e.brokenAxis;
c&&e.treeGrid.mapOfPosToGridNode&&(g=e.treeGrid.expand(e.treeGrid.mapOfPosToGridNode[g.pos]),c.setBreaks(g,y(a,!0)))};l.prototype.toggleCollapse=function(a){var g=this.tick,e=g.axis,c=e.brokenAxis;c&&e.treeGrid.mapOfPosToGridNode&&(g=e.treeGrid.toggleCollapse(e.treeGrid.mapOfPosToGridNode[g.pos]),c.setBreaks(g,y(a,!0)))};return l}();return E});G(e,"Series/TreeUtilities.js",[e["Core/Color/Color.js"],e["Core/Utilities.js"]],function(e,v){function t(a,e){var l=e.before,z=e.idRoot,g=e.mapIdToNode[z],
q=e.points[a.i],n=q&&q.options||{},c=[],p=0;a.levelDynamic=a.level-(!1!==e.levelIsConstant?0:g.level);a.name=y(q&&q.name,"");a.visible=z===a.id||!0===e.visible;"function"===typeof l&&(a=l(a,e));a.children.forEach(function(g,n){var l=D({},e);D(l,{index:n,siblings:a.children.length,visible:a.visible});g=t(g,l);c.push(g);g.visible&&(p+=g.val)});l=y(n.value,p);a.visible=0<=l&&(0<p||a.visible);a.children=c;a.childrenTotal=p;a.isLeaf=a.visible&&!p;a.val=l;return a}var D=v.extend,F=v.isArray,w=v.isNumber,
l=v.isObject,B=v.merge,y=v.pick;return{getColor:function(a,l){var t=l.index,v=l.mapOptionsToLevel,g=l.parentColor,q=l.parentColorIndex,n=l.series,c=l.colors,p=l.siblings,u=n.points,z=n.chart.options.chart,w;if(a){u=u[a.i];a=v[a.level]||{};if(v=u&&a.colorByPoint){var b=u.index%(c?c.length:z.colorCount);var A=c&&c[b]}if(!n.chart.styledMode){c=u&&u.options.color;z=a&&a.color;if(w=g)w=(w=a&&a.colorVariation)&&"brightness"===w.key&&t&&p?e.parse(g).brighten(t/p*w.to).get():g;w=y(c,z,A,w,n.color)}var h=
y(u&&u.options.colorIndex,a&&a.colorIndex,b,q,l.colorIndex)}return{color:w,colorIndex:h}},getLevelOptions:function(a){var e={};if(l(a)){var t=w(a.from)?a.from:1;var v=a.levels;var g={};var q=l(a.defaults)?a.defaults:{};F(v)&&(g=v.reduce(function(a,c){if(l(c)&&w(c.level)){var e=B({},c);var g=y(e.levelIsConstant,q.levelIsConstant);delete e.levelIsConstant;delete e.level;c=c.level+(g?0:t-1);l(a[c])?B(!0,a[c],e):a[c]=e}return a},{}));v=w(a.to)?a.to:1;for(a=0;a<=v;a++)e[a]=B({},q,l(g[a])?g[a]:{})}return e},
setTreeValues:t,updateRootId:function(a){if(l(a)){var e=l(a.options)?a.options:{};e=y(a.rootNode,e.rootId,"");l(a.userOptions)&&(a.userOptions.rootId=e);a.rootNode=e}return e}}});G(e,"Core/Axis/TreeGrid/TreeGridAxis.js",[e["Core/Axis/BrokenAxis.js"],e["Core/Axis/GridAxis.js"],e["Gantt/Tree.js"],e["Core/Axis/TreeGrid/TreeGridTick.js"],e["Series/TreeUtilities.js"],e["Core/Utilities.js"]],function(e,v,t,G,F,w){function l(a,c){var b=a.collapseEnd||0;a=a.collapseStart||0;b>=c&&(a-=.5);return{from:a,to:b,
showPoints:!1}}function B(a,c,b){var d=[],e=[],f={},m="boolean"===typeof c?c:!1,g={},h=-1;a=t.getTree(a,{after:function(a){a=g[a.pos];var c=0,b=0;a.children.forEach(function(a){b+=(a.descendants||0)+1;c=Math.max((a.height||0)+1,c)});a.descendants=b;a.height=c;a.collapsed&&e.push(a)},before:function(a){var c=p(a.data,!0)?a.data:{},b=u(c.name)?c.name:"",e=f[a.parent];e=p(e,!0)?g[e.pos]:null;var k=function(a){return a.name===b},l;m&&p(e,!0)&&(l=q(e.children,k))?(k=l.pos,l.nodes.push(a)):k=h++;g[k]||
(g[k]=l={depth:e?e.depth+1:0,name:b,id:c.id,nodes:[a],children:[],pos:k},-1!==k&&d.push(b),p(e,!0)&&e.children.push(l));u(a.id)&&(f[a.id]=a);l&&!0===c.collapsed&&(l.collapsed=!0);a.pos=k}});g=function(a,c){var b=function(a,d,e){var f=d+(-1===d?0:c-1),g=(f-d)/2,m=d+g;a.nodes.forEach(function(a){var c=a.data;p(c,!0)&&(c.y=d+(c.seriesIndex||0),delete c.seriesIndex);a.pos=m});e[m]=a;a.pos=m;a.tickmarkOffset=g+.5;a.collapseStart=f+.5;a.children.forEach(function(a){b(a,f+1,e);f=(a.collapseEnd||0)-.5});
a.collapseEnd=f+.5;return e};return b(a["-1"],-1,{})}(g,b);return{categories:d,mapOfIdToNode:f,mapOfPosToGridNode:g,collapsedNodes:e,tree:a}}function y(a){a.target.axes.filter(function(a){return"treegrid"===a.options.type}).forEach(function(b){var d=b.options||{},e=d.labels,f=d.uniqueNames;d=d.max;var g=0;if(!b.treeGrid.mapOfPosToGridNode||b.series.some(function(a){return!a.hasRendered||a.isDirtyData||a.isDirty})){var m=b.series.reduce(function(a,b){b.visible&&((b.options.data||[]).forEach(function(c){b.options.keys&&
b.options.keys.length&&(c=b.pointClass.prototype.optionsToObject.call({series:b},c),b.pointClass.setGanttPointAliases(c));p(c,!0)&&(c.seriesIndex=g,a.push(c))}),!0===f&&g++);return a},[]);if(d&&m.length<d)for(var h=m.length;h<=d;h++)m.push({name:h+"\u200b"});d=B(m,f||!1,!0===f?g:1);b.categories=d.categories;b.treeGrid.mapOfPosToGridNode=d.mapOfPosToGridNode;b.hasNames=!0;b.treeGrid.tree=d.tree;b.series.forEach(function(a){var b=(a.options.data||[]).map(function(b){c(b)&&a.options.keys&&a.options.keys.length&&
m.forEach(function(a){0<=b.indexOf(a.x)&&0<=b.indexOf(a.x2)&&(b=a)});return p(b,!0)?L(b):b});a.visible&&a.setData(b,!1)});b.treeGrid.mapOptionsToLevel=J({defaults:e,from:1,levels:e&&e.levels,to:b.treeGrid.tree&&b.treeGrid.tree.height});"beforeRender"===a.type&&(b.treeGrid.collapsedNodes=d.collapsedNodes)}})}function a(a,b){var c=this.treeGrid.mapOptionsToLevel||{},d=this.ticks,e=d[b],g;if("treegrid"===this.options.type&&this.treeGrid.mapOfPosToGridNode){var f=this.treeGrid.mapOfPosToGridNode[b];(c=
c[f.depth])&&(g={labels:c});!e&&h?d[b]=new h(this,b,void 0,void 0,{category:f.name,tickmarkOffset:f.tickmarkOffset,options:g}):(e.parameters.category=f.name,e.options=g,e.addLabel())}else a.apply(this,Array.prototype.slice.call(arguments,1))}function z(a,b,c,e){var f=this,m="treegrid"===c.type;f.treeGrid||(f.treeGrid=new d(f));m&&(g(b,"beforeRender",y),g(b,"beforeRedraw",y),g(b,"addSeries",function(a){a.options.data&&(a=B(a.options.data,c.uniqueNames||!1,1),f.treeGrid.collapsedNodes=(f.treeGrid.collapsedNodes||
[]).concat(a.collapsedNodes))}),g(f,"foundExtremes",function(){f.treeGrid.collapsedNodes&&f.treeGrid.collapsedNodes.forEach(function(a){var b=f.treeGrid.collapse(a);f.brokenAxis&&(f.brokenAxis.setBreaks(b,!1),f.treeGrid.collapsedNodes&&(f.treeGrid.collapsedNodes=f.treeGrid.collapsedNodes.filter(function(b){return a.collapseStart!==b.collapseStart||a.collapseEnd!==b.collapseEnd})))})}),g(f,"afterBreaks",function(){"yAxis"===f.coll&&!f.staticScale&&f.chart.options.chart.height&&(f.isDirty=!0)}),c=L({grid:{enabled:!0},
labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},c,{reversed:!0,grid:{columns:void 0}}));a.apply(f,[b,c,e]);m&&(f.hasNames=!0,f.options.showLastLabel=!0)}function D(a){var b=this.options;"treegrid"===b.type?(this.min=K(this.userMin,b.min,this.dataMin),this.max=K(this.userMax,b.max,this.dataMax),n(this,"foundExtremes"),this.setAxisTranslation(),this.tickmarkOffset=.5,this.tickInterval=1,
this.tickPositions=this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():[]):a.apply(this,Array.prototype.slice.call(arguments,1))}var J=F.getLevelOptions,g=w.addEvent,q=w.find,n=w.fireEvent,c=w.isArray,p=w.isObject,u=w.isString,L=w.merge,K=w.pick,b=w.wrap,A=[],h,d=function(){function c(a){this.axis=a}c.compose=function(c,d,f,g){if(w.pushUnique(A,c)){-1===c.keepProps.indexOf("treeGrid")&&c.keepProps.push("treeGrid");var m=c.prototype;b(m,"generateTick",a);b(m,"init",z);b(m,"setTickInterval",
D);m.utils={getNode:t.getNode}}w.pushUnique(A,g)&&(h||(h=g));v.compose(c,d,g);e.compose(c,f);G.compose(g);return c};c.prototype.setCollapsedStatus=function(a){var b=this.axis,c=b.chart;b.series.forEach(function(b){var d=b.options.data;if(a.id&&d){var e=c.get(a.id);b=d[b.data.indexOf(e)];e&&b&&(e.collapsed=a.collapsed,b.collapsed=a.collapsed)}})};c.prototype.collapse=function(a){var b=this.axis,c=b.options.breaks||[],d=l(a,b.max);c.push(d);a.collapsed=!0;b.treeGrid.setCollapsedStatus(a);return c};
c.prototype.expand=function(a){var b=this.axis,c=b.options.breaks||[],d=l(a,b.max);a.collapsed=!1;b.treeGrid.setCollapsedStatus(a);return c.reduce(function(a,b){b.to===d.to&&b.from===d.from||a.push(b);return a},[])};c.prototype.getTickPositions=function(){var a=this.axis,b=Math.floor(a.min/a.tickInterval)*a.tickInterval,c=Math.ceil(a.max/a.tickInterval)*a.tickInterval;return Object.keys(a.treeGrid.mapOfPosToGridNode||{}).reduce(function(d,e){e=+e;!(e>=b&&e<=c)||a.brokenAxis&&a.brokenAxis.isInAnyBreak(e)||
d.push(e);return d},[])};c.prototype.isCollapsed=function(a){var b=this.axis,c=b.options.breaks||[],d=l(a,b.max);return c.some(function(a){return a.from===d.from&&a.to===d.to})};c.prototype.toggleCollapse=function(a){return this.isCollapsed(a)?this.expand(a):this.collapse(a)};return c}();return d});G(e,"masters/modules/treegrid.src.js",[e["Core/Globals.js"],e["Core/Axis/TreeGrid/TreeGridAxis.js"]],function(e,v){v.compose(e.Axis,e.Chart,e.Series,e.Tick)})});
//# sourceMappingURL=treegrid.js.map