/*
 Highcharts Stock JS v11.1.0 (2023-06-05)

 Indicator series type for Highcharts Stock

 (c) 2010-2021 Karol Kolodziej

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/indicators/klinger",["highcharts","highcharts/modules/stock"],function(l){a(l);a.Highcharts=l;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function l(a,k,q,l){a.hasOwnProperty(k)||(a[k]=l.apply(null,q),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:k,
module:a[k]}})))}a=a?a._modules:{};l(a,"Stock/Indicators/MultipleLinesComposition.js",[a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,k){const {sma:{prototype:q}}=a.seriesTypes,{defined:l,error:t,merge:u}=k;var r;(function(a){function r(b){return"plot"+b.charAt(0).toUpperCase()+b.slice(1)}function v(b,g){const c=[];(b.pointArrayMap||[]).forEach(b=>{b!==g&&c.push(r(b))});return c}function n(){const b=this,g=b.linesApiNames;var c=b.areaLinesNames;const d=b.points,a=b.options,
e=b.graph,p={options:{gapSize:a.gapSize}},f=[];var h=v(b,b.pointValKey);let k=d.length,m;h.forEach((b,c)=>{for(f[c]=[];k--;)m=d[k],f[c].push({x:m.x,plotX:m.plotX,plotY:m[b],isNull:!l(m[b])});k=d.length});if(b.userOptions.fillColor&&c.length){var n=h.indexOf(r(c[0]));n=f[n];c=1===c.length?d:f[h.indexOf(r(c[1]))];h=b.color;b.points=c;b.nextPoints=n;b.color=b.userOptions.fillColor;b.options=u(d,p);b.graph=b.area;b.fillGraph=!0;q.drawGraph.call(b);b.area=b.graph;delete b.nextPoints;delete b.fillGraph;
b.color=h}g.forEach((c,g)=>{f[g]?(b.points=f[g],a[c]?b.options=u(a[c].styles,p):t('Error: "There is no '+c+' in DOCS options declared. Check if linesApiNames are consistent with your DOCS line names."'),b.graph=b["graph"+c],q.drawGraph.call(b),b["graph"+c]=b.graph):t('Error: "'+c+" doesn't have equivalent in pointArrayMap. To many elements in linesApiNames relative to pointArrayMap.\"")});b.points=d;b.options=a;b.graph=e;q.drawGraph.call(b)}function c(b){var c;let d=[];b=b||this.points;if(this.fillGraph&&
this.nextPoints){if((c=q.getGraphPath.call(this,this.nextPoints))&&c.length){c[0][0]="L";d=q.getGraphPath.call(this,b);c=c.slice(0,d.length);for(let b=c.length-1;0<=b;b--)d.push(c[b])}}else d=q.getGraphPath.apply(this,arguments);return d}function d(b){const c=[];(this.pointArrayMap||[]).forEach(d=>{c.push(b[d])});return c}function p(){const b=this.pointArrayMap;let c=[],d;c=v(this);q.translate.apply(this,arguments);this.points.forEach(a=>{b.forEach((b,g)=>{d=a[b];this.dataModify&&(d=this.dataModify.modifyValue(d));
null!==d&&(a[c[g]]=this.yAxis.toPixels(d,!0))})})}const e=[],f=["bottomLine"],m=["top","bottom"],h=["top"];a.compose=function(b){if(k.pushUnique(e,b)){const a=b.prototype;a.linesApiNames=a.linesApiNames||f.slice();a.pointArrayMap=a.pointArrayMap||m.slice();a.pointValKey=a.pointValKey||"top";a.areaLinesNames=a.areaLinesNames||h.slice();a.drawGraph=n;a.getGraphPath=c;a.toYData=d;a.translate=p}return b}})(r||(r={}));return r});l(a,"Stock/Indicators/Klinger/KlingerIndicator.js",[a["Stock/Indicators/MultipleLinesComposition.js"],
a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,k,q){const {ema:l,sma:t}=k.seriesTypes,{correctFloat:u,error:r,extend:w,isArray:x,merge:v}=q;class n extends t{constructor(){super(...arguments);this.volumeSeries=this.options=this.points=this.data=void 0}calculateTrend(c,d){return c[d][1]+c[d][2]+c[d][3]>c[d-1][1]+c[d-1][2]+c[d-1][3]?1:-1}isValidData(c){var d=this.chart;const a=this.options,e=this.linkedParent;c=x(c)&&4===c.length;(d=this.volumeSeries||(this.volumeSeries=d.get(a.params.volumeSeriesID)))||
r("Series "+a.params.volumeSeriesID+" not found! Check `volumeSeriesID`.",!0,e.chart);return!(![e,d].every(function(c){return c&&c.xData&&c.xData.length>=a.params.slowAvgPeriod})||!c)}getCM(c,a,p,e,f){return u(a+(p===e?c:f))}getDM(c,a){return u(c-a)}getVolumeForce(c){const a=[];let p;let e=1;var f=0;let m=c[0][1]-c[0][2];var h=0;let b;for(e;e<c.length;e++)b=this.calculateTrend(c,e),p=this.getDM(c[e][1],c[e][2]),f=this.getCM(f,p,b,h,m),h=this.volumeSeries.yData[e]*b*Math.abs(2*(p/f-1))*100,a.push([h]),
h=b,m=p;return a}getEMA(c,a,p,e,f,m,h){return l.prototype.calculateEma(h||[],c,"undefined"===typeof m?1:m,e,a,"undefined"===typeof f?-1:f,p)}getSMA(c,a,p){return l.prototype.accumulatePeriodPoints(c,a,p)/c}getValues(c,a){const d=[],e=c.xData;c=c.yData;const f=[],m=[],h=[];var b;let g=0,k=0,l=void 0,q=void 0,n=null;if(this.isValidData(c[0])){var r=this.getVolumeForce(c),t=this.getSMA(a.fastAvgPeriod,0,r),v=this.getSMA(a.slowAvgPeriod,0,r),w=2/(a.fastAvgPeriod+1),x=2/(a.slowAvgPeriod+1);for(g;g<c.length;g++)g>=
a.fastAvgPeriod&&(l=k=this.getEMA(r,l,t,w,0,g,e)[1]),g>=a.slowAvgPeriod&&(q=b=this.getEMA(r,q,v,x,0,g,e)[1],b=u(k-b),h.push(b),h.length>=a.signalPeriod&&(n=h.slice(-a.signalPeriod).reduce((a,b)=>a+b)/a.signalPeriod),d.push([e[g],b,n]),f.push(e[g]),m.push([b,n]));return{values:d,xData:f,yData:m}}}}n.defaultOptions=v(t.defaultOptions,{params:{fastAvgPeriod:34,slowAvgPeriod:55,signalPeriod:13,volumeSeriesID:"volume"},signalLine:{styles:{lineWidth:1,lineColor:"#ff0000"}},dataGrouping:{approximation:"averages"},
tooltip:{pointFormat:'<span style="color: {point.color}">\u25cf</span><b> {series.name}</b><br/><span style="color: {point.color}">Klinger</span>: {point.y}<br/><span style="color: {point.series.options.signalLine.styles.lineColor}">Signal</span>: {point.signal}<br/>'}});w(n.prototype,{areaLinesNames:[],linesApiNames:["signalLine"],nameBase:"Klinger",nameComponents:["fastAvgPeriod","slowAvgPeriod"],pointArrayMap:["y","signal"],parallelArrays:["x","y","signal"],pointValKey:"y"});a.compose(n);k.registerSeriesType("klinger",
n);"";return n});l(a,"masters/indicators/klinger.src.js",[],function(){})});
//# sourceMappingURL=klinger.js.map