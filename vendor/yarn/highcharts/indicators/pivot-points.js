/*
 Highstock JS v11.1.0 (2023-06-05)

 Indicator series type for Highcharts Stock

 (c) 2010-2021 Pawe Fus

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts","highcharts/modules/stock"],function(c){a(c);a.Highcharts=c;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function c(a,d,c,k){a.hasOwnProperty(d)||(a[d]=k.apply(null,c),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:d,
module:a[d]}})))}a=a?a._modules:{};c(a,"Stock/Indicators/PivotPoints/PivotPointsPoint.js",[a["Core/Series/SeriesRegistry.js"]],function(a){function d(c,d){const k=c.series.pointArrayMap;let r=k.length;for(a.seriesTypes.sma.prototype.pointClass.prototype[d].call(c);r--;)d="dataLabel"+k[r],c[d]&&c[d].element&&c[d].destroy(),c[d]=null}const c=a.seriesTypes.sma.prototype.pointClass;class k extends c{constructor(){super(...arguments);this.series=this.pivotLine=this.P=void 0}destroyElements(){d(this,"destroyElements")}destroy(){d(this,
"destroyElements")}}return k});c(a,"Stock/Indicators/PivotPoints/PivotPointsIndicator.js",[a["Stock/Indicators/PivotPoints/PivotPointsPoint.js"],a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,c,v){const {sma:d}=c.seriesTypes,{merge:w,extend:x,defined:u,isArray:r}=v;class t extends d{constructor(){super(...arguments);this.plotEndPoint=this.endPoint=this.points=this.options=this.data=void 0}toYData(b){return[b.P]}translate(){const b=this;super.translate.apply(b);b.points.forEach(function(e){b.pointArrayMap.forEach(function(a){u(e[a])&&
(e["plot"+a]=b.yAxis.toPixels(e[a],!0))})});b.plotEndPoint=b.xAxis.toPixels(b.endPoint,!0)}getGraphPath(b){const e=this,a=[[],[],[],[],[],[],[],[],[]],c=e.pointArrayMap.length;let f=e.plotEndPoint,d=[],g,h,m=b.length,l;for(;m--;){h=b[m];for(l=0;l<c;l++)g=e.pointArrayMap[l],u(h[g])&&a[l].push({plotX:h.plotX,plotY:h["plot"+g],isNull:!1},{plotX:f,plotY:h["plot"+g],isNull:!1},{plotX:f,plotY:null,isNull:!0});f=h.plotX}a.forEach(b=>{d=d.concat(super.getGraphPath.call(e,b))});return d}drawDataLabels(){const b=
this,e=b.pointArrayMap;let a,c,f,d;b.options.dataLabels.enabled&&(c=b.points.length,e.concat([!1]).forEach((g,h)=>{for(d=c;d--;)f=b.points[d],g?(f.y=f[g],f.pivotLine=g,f.plotY=f["plot"+g],a=f["dataLabel"+g],h&&(f["dataLabel"+e[h-1]]=f.dataLabel),f.dataLabels||(f.dataLabels=[]),f.dataLabels[0]=f.dataLabel=a=a&&a.element?a:null):f["dataLabel"+e[h-1]]=f.dataLabel;super.drawDataLabels.call(b)}))}getValues(b,a){const e=a.period,c=b.xData,d=(b=b.yData)?b.length:0;a=this[a.algorithm+"Placement"];const k=
[],g=[],h=[];let m,l,q;let n;if(!(c.length<e)&&r(b[0])&&4===b[0].length){for(n=e+1;n<=d+e;n+=e){q=c.slice(n-e-1,n);var p=b.slice(n-e-1,n);l=q.length;m=q[l-1];p=this.getPivotAndHLC(p);p=a(p);p=k.push([m].concat(p));g.push(m);h.push(k[p-1].slice(1))}this.endPoint=q[0]+(m-q[0])/l*e;return{values:k,xData:g,yData:h}}}getPivotAndHLC(b){const a=b[b.length-1][3];let c=-Infinity,d=Infinity;b.forEach(function(b){c=Math.max(c,b[1]);d=Math.min(d,b[2])});return[(c+d+a)/3,c,d,a]}standardPlacement(b){const a=b[1]-
b[2];return[null,null,b[0]+a,2*b[0]-b[2],b[0],2*b[0]-b[1],b[0]-a,null,null]}camarillaPlacement(b){const a=b[1]-b[2];return[b[3]+1.5*a,b[3]+1.25*a,b[3]+1.1666*a,b[3]+1.0833*a,b[0],b[3]-1.0833*a,b[3]-1.1666*a,b[3]-1.25*a,b[3]-1.5*a]}fibonacciPlacement(b){const a=b[1]-b[2];return[null,b[0]+a,b[0]+.618*a,b[0]+.382*a,b[0],b[0]-.382*a,b[0]-.618*a,b[0]-a,null]}}t.defaultOptions=w(d.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,
format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}});x(t.prototype,{nameBase:"Pivot Points",pointArrayMap:"R4 R3 R2 R1 P S1 S2 S3 S4".split(" "),pointValKey:"P",pointClass:a});c.registerSeriesType("pivotpoints",t);"";return t});c(a,"masters/indicators/pivot-points.src.js",[],function(){})});
//# sourceMappingURL=pivot-points.js.map