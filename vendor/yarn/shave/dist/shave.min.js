!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).shave=t()}(this,function(){"use strict";function q(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function T(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||((o=o||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}return function(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var o="string"==typeof(e=e)?T([],q(document.querySelectorAll(e)),!1):"length"in e?T([],q(e),!1):[e];if(o.length)for(var r=void 0===(e=n.character)?"â€¦":e,i=void 0===(e=n.classname)?"js-shave":e,e=void 0===(e=n.spaces)||e,a=n.charclassname,l=void 0===a?"js-shave-char":a,c=void 0===(a=n.link)?{}:a,s="boolean"!=typeof e||e,f=c&&"{}"!==JSON.stringify(c)&&c.href,d=f?"a":"span",h=0;h<o.length;h+=1){var u=o[h],v=u.style,y=u.querySelector("."+i),m=void 0===u.textContent?"innerText":"textContent",y=(y&&(u.removeChild(u.querySelector("."+l)),u[m]=u[m]),u[m]),p=s?y.split(" "):y;if(!(p.length<2)){var y=v.height,g=(v.height="auto",v.maxHeight);if(v.maxHeight="none",!(u.offsetHeight<=t)){var x,b=f&&c.textContent?c.textContent:r,j=document.createElement(d),C={className:l,textContent:b};for(x in C)j[x]=C[x],j.textContent=r;if(f)for(var A in c)j[A]=c[A];for(var E,H=p.length-1,S=0;S<H;)E=S+H+1>>1,u[m]=s?p.slice(0,E).join(" "):p.slice(0,E),u.insertAdjacentElement("beforeend",j),u.offsetHeight>t?H=E-1:S=E;u[m]=s?p.slice(0,H).join(" "):p.slice(0,H),u.insertAdjacentElement("beforeend",j);var b=s?" ".concat(p.slice(H).join(" ")):p.slice(H),b=document.createTextNode(b),N=document.createElement("span");N.classList.add(i),N.style.display="none",N.appendChild(b),u.insertAdjacentElement("beforeend",N)}v.height=y,v.maxHeight=g}}}});
